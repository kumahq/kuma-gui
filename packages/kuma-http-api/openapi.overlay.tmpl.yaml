overlay: 1.0.0
info:
  title: Overlay to customise API for Kuma
  version: 0.1.0
extends: ./dist/openapi.yaml
actions:
  - target: "$.info"
    update:
      x-oas-source: kumahq/kuma@${GIT_SHA}
  - target: '$..[?(@.creationTime)]'
    update:
      creationTime:
        type: string
  - target: '$..[?(@.modificationTime)]'
    update:
      modificationTime:
        type: string

  - target: '$..[?(@.connectTime)]'
    update:
      connectTime:
        type: string
  - target: '$..[?(@.disconnectTime)]'
    update:
      disconnectTime:
        type: string

  - target: '$..[?(@.lastUpdateTime)]'
    update:
      lastUpdateTime:
        type: string

  - target: '$..[?(@.certificateExpirationTime)]'
    update:
      certificateExpirationTime:
        type: string
  - target: '$..[?(@.lastCertificateRegeneration)]'
    update:
      lastCertificateRegeneration:
        type: string
  - target: '$.components.schemas.MeshItem.properties'
    update:
      creationTime:
        type: string
      modificationTime:
        type: string
  - target: '$.components.schemas.MeshItem.properties.meshServices.properties.mode.oneOf'
    remove: true
  - target: '$.components.schemas.MeshItem.properties.meshServices.properties.mode'
    update:
      type: string
      enum:
        - Disabled
        - Everywhere
        - ReachableBackends
        - Exclusive
