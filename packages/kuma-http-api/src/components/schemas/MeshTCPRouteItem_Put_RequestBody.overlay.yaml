overlay: 1.0.0
info:
  title: Customise MeshTCPRoute
  version: 0.1.0
extends: ../../../generated/components/schemas/MeshTCPRouteItem.yaml
actions:
  # mark as a request body so we can make amends for request bodies
  - target: '$'
    update:
      x-request: true

  # default specs.default just for this policy
  - target: '$.properties.spec.properties.to.items'
    update:
      default:
        targetRef:
          kind: MeshService
        rules: []
  - target: '$.properties.spec.properties.rules.items'
    update:
      default:
        targetRef:
          kind: MeshService
        rules: []

  - target: '$..backendRefs.items'
    update:
      x-kuma-type: TargetRef
