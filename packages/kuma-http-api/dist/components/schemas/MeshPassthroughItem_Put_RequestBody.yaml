description: MeshPassthrough controls how traffic to external services (outside the mesh) is handled by the sidecar proxy. It allows you to configure passthrough mode to permit, deny, or selectively allow traffic to specific external destinations based on domain names, IPs, or CIDR ranges.
type: object
properties:
  type:
    description: the type of the resource
    type: string
    enum:
      - MeshPassthrough
  mesh:
    description: Mesh is the name of the Kuma mesh this resource belongs to. It may be omitted for cluster-scoped resources.
    type: string
    default: default
  kri:
    description: A unique identifier for this resource instance used by internal tooling and integrations. Typically derived from resource attributes and may be used for cross-references or indexing
    type: string
    example: kri_mp_default_zone-east_kuma-demo_mypolicy1_
    readOnly: true
  name:
    description: Name of the Kuma resource
    type: string
  labels:
    description: The labels to help identity resources
    type: object
    additionalProperties:
      type: string
  spec:
    description: Spec is the specification of the Kuma MeshPassthrough resource.
    type: object
    properties:
      default:
        description: MeshPassthrough configuration.
        type: object
        properties:
          appendMatch:
            description: AppendMatch is a list of destinations that should be allowed through the sidecar.
            type: array
            items:
              properties:
                port:
                  description: Port defines the port to which a user makes a request.
                  type: integer
                  format: int32
                protocol:
                  description: 'Protocol defines the communication protocol. Possible values: `tcp`, `tls`, `grpc`, `http`, `http2`, `mysql`.'
                  type: string
                  default: tcp
                  enum:
                    - tcp
                    - tls
                    - grpc
                    - http
                    - http2
                    - mysql
                type:
                  description: Type of the match, one of `Domain`, `IP` or `CIDR` is available.
                  type: string
                  enum:
                    - Domain
                    - IP
                    - CIDR
                value:
                  description: Value for the specified Type.
                  type: string
              required:
                - type
                - value
              type: object
          passthroughMode:
            description: |-
              Defines the passthrough behavior. Possible values: `All`, `None`, `Matched`
              When `All` or `None` `appendMatch` has no effect.
              If not specified then the default value is "Matched".
            type: string
            enum:
              - All
              - Matched
              - None
      targetRef:
        description: |-
          TargetRef is a reference to the resource the policy takes an effect on.
          The resource could be either a real store object or virtual resource
          defined in-place.
        type: object
        properties:
          kind:
            description: Kind of the referenced resource
            type: string
            enum:
              - Mesh
              - MeshSubset
              - MeshGateway
              - MeshService
              - MeshExternalService
              - MeshMultiZoneService
              - MeshServiceSubset
              - MeshHTTPRoute
              - Dataplane
          labels:
            description: |-
              Labels are used to select group of MeshServices that match labels. Either Labels or
              Name and Namespace can be used.
            type: object
            additionalProperties:
              type: string
          mesh:
            description: Mesh is reserved for future use to identify cross mesh resources.
            type: string
          name:
            description: |-
              Name of the referenced resource. Can only be used with kinds: `MeshService`,
              `MeshServiceSubset` and `MeshGatewayRoute`
            type: string
          namespace:
            description: |-
              Namespace specifies the namespace of target resource. If empty only resources in policy namespace
              will be targeted.
            type: string
          proxyTypes:
            description: |-
              ProxyTypes specifies the data plane types that are subject to the policy. When not specified,
              all data plane types are targeted by the policy.
            type: array
            items:
              enum:
                - Sidecar
                - Gateway
              type: string
          sectionName:
            description: |-
              SectionName is used to target specific section of resource.
              For example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.
            type: string
          tags:
            description: |-
              Tags used to select a subset of proxies by tags. Can only be used with kinds
              `MeshSubset` and `MeshServiceSubset`
            type: object
            additionalProperties:
              type: string
        required:
          - kind
    default:
      default:
        passthroughMode: None
  creationTime:
    description: Time at which the resource was created
    type: string
    format: date-time
    example: '0001-01-01T00:00:00Z'
    readOnly: true
  modificationTime:
    description: Time at which the resource was updated
    type: string
    format: date-time
    example: '0001-01-01T00:00:00Z'
    readOnly: true
required:
  - type
  - name
  - spec
x-request: true

