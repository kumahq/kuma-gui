import type { EndpointDependencies, MockResponder } from '@/test-support'
export default ({ env, fake }: EndpointDependencies): MockResponder => (req) => {
  const { name } = req.params

  let type: 'gateway_builtin' | 'gateway_delegated' | 'proxy' = 'proxy'
  if (name.includes('-gateway_builtin')) {
    type = 'gateway_builtin'
  } else if (name.includes('-gateway_delegated')) {
    type = 'gateway_delegated'
  }

  // Allows the service tag to be synchronized between overview and stats.
  fake.kuma.seed(name as string)
  const service = fake.word.noun()

  if (type === 'gateway_builtin') {
    return {
      headers: {},
      body: `meshtrace:opentelemetry::observability_name::meshtrace_opentelemetry
meshtrace:opentelemetry::default_priority::max_connections::1024
meshtrace:opentelemetry::default_priority::max_pending_requests::1024
meshtrace:opentelemetry::default_priority::max_requests::1024
meshtrace:opentelemetry::default_priority::max_retries::3
meshtrace:opentelemetry::high_priority::max_connections::1024
meshtrace:opentelemetry::high_priority::max_pending_requests::1024
meshtrace:opentelemetry::high_priority::max_requests::1024
meshtrace:opentelemetry::high_priority::max_retries::3
meshtrace:opentelemetry::added_via_api::true
meshtrace:opentelemetry::10.48.11.249:4317::cx_active::3
meshtrace:opentelemetry::10.48.11.249:4317::cx_connect_fail::0
meshtrace:opentelemetry::10.48.11.249:4317::cx_total::3
meshtrace:opentelemetry::10.48.11.249:4317::rq_active::0
meshtrace:opentelemetry::10.48.11.249:4317::rq_error::0
meshtrace:opentelemetry::10.48.11.249:4317::rq_success::3940
meshtrace:opentelemetry::10.48.11.249:4317::rq_timeout::0
meshtrace:opentelemetry::10.48.11.249:4317::rq_total::3940
meshtrace:opentelemetry::10.48.11.249:4317::hostname::otel-collector.observability.svc
meshtrace:opentelemetry::10.48.11.249:4317::health_flags::healthy
meshtrace:opentelemetry::10.48.11.249:4317::weight::1
meshtrace:opentelemetry::10.48.11.249:4317::region::
meshtrace:opentelemetry::10.48.11.249:4317::zone::
meshtrace:opentelemetry::10.48.11.249:4317::sub_zone::
meshtrace:opentelemetry::10.48.11.249:4317::canary::false
meshtrace:opentelemetry::10.48.11.249:4317::priority::0
meshtrace:opentelemetry::10.48.11.249:4317::success_rate::-1
meshtrace:opentelemetry::10.48.11.249:4317::local_origin_success_rate::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::observability_name::api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::outlier::success_rate_average::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::outlier::success_rate_ejection_threshold::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::outlier::local_origin_success_rate_average::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::outlier::local_origin_success_rate_ejection_threshold::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::default_priority::max_connections::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::default_priority::max_pending_requests::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::default_priority::max_requests::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::default_priority::max_retries::3
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::high_priority::max_connections::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::high_priority::max_pending_requests::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::high_priority::max_requests::1024
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::high_priority::max_retries::3
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::added_via_api::true
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::cx_active::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::cx_connect_fail::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::cx_total::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::rq_active::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::rq_error::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::rq_success::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::rq_timeout::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::rq_total::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::hostname::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::health_flags::healthy
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::weight::2
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::region::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::zone::us-east
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::sub_zone::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::canary::false
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::priority::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::success_rate::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.15:8080::local_origin_success_rate::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::cx_active::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::cx_connect_fail::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::cx_total::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::rq_active::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::rq_error::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::rq_success::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::rq_timeout::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::rq_total::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::hostname::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::health_flags::healthy
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::weight::2
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::region::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::zone::us-east
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::sub_zone::
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::canary::false
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::priority::0
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::success_rate::-1
api-play-000_microservice-mesh_svc_8080-0eee2d145d492a4e::10.44.0.16:8080::local_origin_success_rate::-1
access_log_sink::observability_name::access_log_sink
access_log_sink::default_priority::max_connections::1024
access_log_sink::default_priority::max_pending_requests::1024
access_log_sink::default_priority::max_requests::1024
access_log_sink::default_priority::max_retries::3
access_log_sink::high_priority::max_connections::1024
access_log_sink::high_priority::max_pending_requests::1024
access_log_sink::high_priority::max_requests::1024
access_log_sink::high_priority::max_retries::3
access_log_sink::added_via_api::false
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_active::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_connect_fail::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_total::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_active::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_error::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_success::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_timeout::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_total::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::hostname::
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::health_flags::healthy
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::weight::1
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::region::
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::zone::
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::sub_zone::
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::canary::false
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::priority::0
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::success_rate::-1
access_log_sink::/tmp/kuma-dp-3947193008/kuma-al-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::local_origin_success_rate::-1
ads_cluster::observability_name::ads_cluster
ads_cluster::default_priority::max_connections::1024
ads_cluster::default_priority::max_pending_requests::1024
ads_cluster::default_priority::max_requests::1024
ads_cluster::default_priority::max_retries::3
ads_cluster::high_priority::max_connections::1024
ads_cluster::high_priority::max_pending_requests::1024
ads_cluster::high_priority::max_requests::1024
ads_cluster::high_priority::max_retries::3
ads_cluster::added_via_api::false
ads_cluster::10.48.11.197:5678::cx_active::1
ads_cluster::10.48.11.197:5678::cx_connect_fail::0
ads_cluster::10.48.11.197:5678::cx_total::1
ads_cluster::10.48.11.197:5678::rq_active::1
ads_cluster::10.48.11.197:5678::rq_error::0
ads_cluster::10.48.11.197:5678::rq_success::0
ads_cluster::10.48.11.197:5678::rq_timeout::0
ads_cluster::10.48.11.197:5678::rq_total::1
ads_cluster::10.48.11.197:5678::hostname::kong-mesh-control-plane.kong-mesh-system
ads_cluster::10.48.11.197:5678::health_flags::healthy
ads_cluster::10.48.11.197:5678::weight::1
ads_cluster::10.48.11.197:5678::region::
ads_cluster::10.48.11.197:5678::zone::
ads_cluster::10.48.11.197:5678::sub_zone::
ads_cluster::10.48.11.197:5678::canary::false
ads_cluster::10.48.11.197:5678::priority::0
ads_cluster::10.48.11.197:5678::success_rate::-1
ads_cluster::10.48.11.197:5678::local_origin_success_rate::-1
_kuma:metrics:hijacker::observability_name::_kuma_metrics_hijacker
_kuma:metrics:hijacker::default_priority::max_connections::1024
_kuma:metrics:hijacker::default_priority::max_pending_requests::1024
_kuma:metrics:hijacker::default_priority::max_requests::1024
_kuma:metrics:hijacker::default_priority::max_retries::3
_kuma:metrics:hijacker::high_priority::max_connections::1024
_kuma:metrics:hijacker::high_priority::max_pending_requests::1024
_kuma:metrics:hijacker::high_priority::max_requests::1024
_kuma:metrics:hijacker::high_priority::max_retries::3
_kuma:metrics:hijacker::added_via_api::true
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_active::1
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_connect_fail::0
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::cx_total::1
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_active::0
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_error::0
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_success::657
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_timeout::0
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::rq_total::657
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::hostname::
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::health_flags::healthy
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::weight::1
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::region::
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::zone::
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::sub_zone::
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::canary::false
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::priority::0
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::success_rate::-1
_kuma:metrics:hijacker::/tmp/kuma-dp-3947193008/kuma-mh-${service}-68fdd4478b-56zxd.microservice-mesh-default.sock::local_origin_success_rate::-1
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::observability_name::api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::default_priority::max_connections::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::default_priority::max_pending_requests::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::default_priority::max_requests::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::default_priority::max_retries::3
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::high_priority::max_connections::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::high_priority::max_pending_requests::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::high_priority::max_requests::1024
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::high_priority::max_retries::3
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::added_via_api::true
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::cx_active::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::cx_connect_fail::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::cx_total::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::rq_active::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::rq_error::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::rq_success::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::rq_timeout::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::rq_total::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::hostname::
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::health_flags::healthy
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::weight::2
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::region::
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::zone::us-west
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::sub_zone::
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::canary::false
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::priority::0
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::success_rate::-1
api-play-004_microservice-mesh_svc_8080-68d84729aaa9cad5::34.168.231.139:10001::local_origin_success_rate::-1
kuma:envoy:admin::observability_name::kuma_envoy_admin
kuma:envoy:admin::default_priority::max_connections::1024
kuma:envoy:admin::default_priority::max_pending_requests::1024
kuma:envoy:admin::default_priority::max_requests::1024
kuma:envoy:admin::default_priority::max_retries::3
kuma:envoy:admin::high_priority::max_connections::1024
kuma:envoy:admin::high_priority::max_pending_requests::1024
kuma:envoy:admin::high_priority::max_requests::1024
kuma:envoy:admin::high_priority::max_retries::3
kuma:envoy:admin::added_via_api::true
kuma:envoy:admin::127.0.0.1:9901::cx_active::4
kuma:envoy:admin::127.0.0.1:9901::cx_connect_fail::0
kuma:envoy:admin::127.0.0.1:9901::cx_total::4
kuma:envoy:admin::127.0.0.1:9901::rq_active::1
kuma:envoy:admin::127.0.0.1:9901::rq_error::0
kuma:envoy:admin::127.0.0.1:9901::rq_success::2635
kuma:envoy:admin::127.0.0.1:9901::rq_timeout::0
kuma:envoy:admin::127.0.0.1:9901::rq_total::2636
kuma:envoy:admin::127.0.0.1:9901::hostname::
kuma:envoy:admin::127.0.0.1:9901::health_flags::healthy
kuma:envoy:admin::127.0.0.1:9901::weight::1
kuma:envoy:admin::127.0.0.1:9901::region::
kuma:envoy:admin::127.0.0.1:9901::zone::
kuma:envoy:admin::127.0.0.1:9901::sub_zone::
kuma:envoy:admin::127.0.0.1:9901::canary::false
kuma:envoy:admin::127.0.0.1:9901::priority::0
kuma:envoy:admin::127.0.0.1:9901::success_rate::-1
kuma:envoy:admin::127.0.0.1:9901::local_origin_success_rate::-1`,
    }
  }

  // use seed to sync the ports in stats.ts with the ports in _overview.ts
  fake.kuma.seed(name as string)
  const inboundCount = parseInt(env('KUMA_DATAPLANEINBOUND_COUNT', `${fake.number.int({ min: 1, max: 5 })}`))
  const ports = Array.from({ length: inboundCount }).map(() => fake.number.int({ min: 1, max: 65535 }))
  const serviceCount = parseInt(env('KUMA_SERVICE_COUNT', `${fake.number.int({ min: 7, max: 50 })}`))
  const services = Array.from({ length: serviceCount }).map(() => `${fake.word.noun()}_svc_${fake.number.int({ min: 1, max: 65535 })}`)
  //

  fake.kuma.seed()
  const inbounds = ports.map(port => {
    const service = `localhost:${port}`
    return `${service}::observability_name:${service}
${service}::default_priority::max_connections::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_pending_requests::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_requests::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_retries::3
${service}::high_priority::max_connections::1024
${service}::high_priority::max_pending_requests::1024
${service}::high_priority::max_requests::1024
${service}::high_priority::max_retries::3
${service}::added_via_api::true
${service}::10.244.0.2:8080::cx_active::0
${service}::10.244.0.2:8080::cx_connect_fail::0
${service}::10.244.0.2:8080::cx_total::0
${service}::10.244.0.2:8080::rq_active::0
${service}::10.244.0.2:8080::rq_error::0
${service}::10.244.0.2:8080::rq_success::0
${service}::10.244.0.2:8080::rq_timeout::0
${service}::10.244.0.2:8080::rq_total::0
${service}::10.244.0.2:8080::hostname::
${service}::10.244.0.2:8080::health_flags::healthy
${service}::10.244.0.2:8080::weight::1
${service}::10.244.0.2:8080::region::
${service}::10.244.0.2:8080::zone::
${service}::10.244.0.2:8080::sub_zone::
${service}::10.244.0.2:8080::canary::false
${service}::10.244.0.2:8080::priority::0
${service}::10.244.0.2:8080::success_rate::-1
${service}::10.244.0.2:8080::local_origin_success_rate::-1`
  }).join('\n')

  const outbounds = services.map(item => {
    const service = item
    return `${service}::observability_name:${service}
${service}::default_priority::max_connections::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_pending_requests::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_requests::${fake.number.int({ min: 1, max: Date.now() })}
${service}::default_priority::max_retries::3
${service}::high_priority::max_connections::1024
${service}::high_priority::max_pending_requests::1024
${service}::high_priority::max_requests::1024
${service}::high_priority::max_retries::3
${service}::added_via_api::true
${service}::10.244.0.2:8080::cx_active::0
${service}::10.244.0.2:8080::cx_connect_fail::0
${service}::10.244.0.2:8080::cx_total::0
${service}::10.244.0.2:8080::rq_active::0
${service}::10.244.0.2:8080::rq_error::0
${service}::10.244.0.2:8080::rq_success::0
${service}::10.244.0.2:8080::rq_timeout::0
${service}::10.244.0.2:8080::rq_total::0
${service}::10.244.0.2:8080::hostname::
${service}::10.244.0.2:8080::health_flags::healthy
${service}::10.244.0.2:8080::weight::1
${service}::10.244.0.2:8080::region::
${service}::10.244.0.2:8080::zone::
${service}::10.244.0.2:8080::sub_zone::
${service}::10.244.0.2:8080::canary::false
${service}::10.244.0.2:8080::priority::0
${service}::10.244.0.2:8080::success_rate::-1
${service}::10.244.0.2:8080::local_origin_success_rate::-1`
  }).join('\n')
  return {
    headers: {},
    body: `${inbounds}
${outbounds}
access_log_sink::observability_name::access_log_sink
access_log_sink::default_priority::max_connections::1024
access_log_sink::default_priority::max_pending_requests::1024
access_log_sink::default_priority::max_requests::1024
access_log_sink::default_priority::max_retries::3
access_log_sink::high_priority::max_connections::1024
access_log_sink::high_priority::max_pending_requests::1024
access_log_sink::high_priority::max_requests::1024
access_log_sink::high_priority::max_retries::3
access_log_sink::added_via_api::false
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::cx_active::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::cx_connect_fail::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::cx_total::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::rq_active::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::rq_error::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::rq_success::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::rq_timeout::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::rq_total::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::hostname::
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::health_flags::healthy
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::weight::1
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::region::
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::zone::
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::sub_zone::
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::canary::false
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::priority::0
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::success_rate::-1
access_log_sink::/tmp/kuma-al-demo-app-gateway-7b7cd559f8-ckgq9.kuma-demo-default.sock::local_origin_success_rate::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::observability_name::demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::outlier::success_rate_average::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::outlier::success_rate_ejection_threshold::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::outlier::local_origin_success_rate_average::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::outlier::local_origin_success_rate_ejection_threshold::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::default_priority::max_connections::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::default_priority::max_pending_requests::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::default_priority::max_requests::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::default_priority::max_retries::3
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::high_priority::max_connections::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::high_priority::max_pending_requests::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::high_priority::max_requests::1024
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::high_priority::max_retries::3
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::added_via_api::true
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::cx_active::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::cx_connect_fail::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::cx_total::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::rq_active::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::rq_error::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::rq_success::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::rq_timeout::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::rq_total::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::hostname::
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::health_flags::healthy
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::weight::1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::region::
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::zone::
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::sub_zone::
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::canary::false
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::priority::0
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::success_rate::-1
demo-app_kuma-demo_svc_5000-41c96d8c484e3ae3::10.42.0.6:5000::local_origin_success_rate::-1
kuma:envoy:admin::observability_name::kuma_envoy_admin
kuma:envoy:admin::default_priority::max_connections::1024
kuma:envoy:admin::default_priority::max_pending_requests::1024
kuma:envoy:admin::default_priority::max_requests::1024
kuma:envoy:admin::default_priority::max_retries::3
kuma:envoy:admin::high_priority::max_connections::1024
kuma:envoy:admin::high_priority::max_pending_requests::1024
kuma:envoy:admin::high_priority::max_requests::1024
kuma:envoy:admin::high_priority::max_retries::3
kuma:envoy:admin::added_via_api::true
kuma:envoy:admin::127.0.0.1:9901::cx_active::4
kuma:envoy:admin::127.0.0.1:9901::cx_connect_fail::0
kuma:envoy:admin::127.0.0.1:9901::cx_total::4
kuma:envoy:admin::127.0.0.1:9901::rq_active::1
kuma:envoy:admin::127.0.0.1:9901::rq_error::0
kuma:envoy:admin::127.0.0.1:9901::rq_success::43
kuma:envoy:admin::127.0.0.1:9901::rq_timeout::0
kuma:envoy:admin::127.0.0.1:9901::rq_total::44
kuma:envoy:admin::127.0.0.1:9901::hostname::
kuma:envoy:admin::127.0.0.1:9901::health_flags::healthy
kuma:envoy:admin::127.0.0.1:9901::weight::1
kuma:envoy:admin::127.0.0.1:9901::region::
kuma:envoy:admin::127.0.0.1:9901::zone::
kuma:envoy:admin::127.0.0.1:9901::sub_zone::
kuma:envoy:admin::127.0.0.1:9901::canary::false
kuma:envoy:admin::127.0.0.1:9901::priority::0
kuma:envoy:admin::127.0.0.1:9901::success_rate::-1
kuma:envoy:admin::127.0.0.1:9901::local_origin_success_rate::-1
ads_cluster::observability_name::ads_cluster
ads_cluster::default_priority::max_connections::1024
ads_cluster::default_priority::max_pending_requests::1024
ads_cluster::default_priority::max_requests::1024
ads_cluster::default_priority::max_retries::3
ads_cluster::high_priority::max_connections::1024
ads_cluster::high_priority::max_pending_requests::1024
ads_cluster::high_priority::max_requests::1024
ads_cluster::high_priority::max_retries::3
ads_cluster::added_via_api::false
ads_cluster::10.43.138.71:5678::cx_active::1
ads_cluster::10.43.138.71:5678::cx_connect_fail::0
ads_cluster::10.43.138.71:5678::cx_total::1
ads_cluster::10.43.138.71:5678::rq_active::1
ads_cluster::10.43.138.71:5678::rq_error::0
ads_cluster::10.43.138.71:5678::rq_success::0
ads_cluster::10.43.138.71:5678::rq_timeout::0
ads_cluster::10.43.138.71:5678::rq_total::1
ads_cluster::10.43.138.71:5678::hostname::kuma-control-plane.kuma-system
ads_cluster::10.43.138.71:5678::health_flags::healthy
ads_cluster::10.43.138.71:5678::weight::1
ads_cluster::10.43.138.71:5678::region::
ads_cluster::10.43.138.71:5678::zone::
ads_cluster::10.43.138.71:5678::sub_zone::
ads_cluster::10.43.138.71:5678::canary::false
ads_cluster::10.43.138.71:5678::priority::0
ads_cluster::10.43.138.71:5678::success_rate::-1
ads_cluster::10.43.138.71:5678::local_origin_success_rate::-1`,
  }
}
